<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7. Projet démo et données &mdash; Documentation QWAT 1.0</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="8. FAQ" href="../faq/index.html" />
    <link rel="prev" title="6.4. Mettre à jour la base de données" href="../developer-guide/upgrade.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            QWAT
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features-guide/index.html">1. QWAT / Module TEKSI eau potable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation-guide/index.html">2. Guide d’installation QWAT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">3. QWAT Guide de l’utilisateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">4. Guide Administrateur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor-guide/index.html">5. Guide du contributeur</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer-guide/index.html">6. Guide du développeur</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Projet démo et données</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">8. FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/index.html">9. Glossaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translation/index.html">10. Traduction</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QWAT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">7. </span>Projet démo et données</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/demo-guide/index.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="demo-data-and-project">
<h1><span class="section-number">7. </span>Projet démo et données<a class="headerlink" href="#demo-data-and-project" title="Lien permanent vers cette rubrique"></a></h1>
<p>QWAT peut être testé en téléchargeant le projet QGS du répertoire <a class="reference external" href="https://github.com/qwat/QWAT">ici</a> et restaurer la <a class="reference external" href="https://github.com/qwat/qwat-data-model/releases/latest">dernière version du modèle de données</a> dans PostgreSQL ( + son extension PostGIS et hstore).</p>
<p>Vous pouvez trouver ces sauvegardes sur la page de téléchargement :</p>
<ul class="simple">
<li><p><cite>qwat_vX.X.X_data_and_structure_sample.backup</cite>: Restaure le schéma QWAT et le jeu de données de démonstration</p></li>
<li><p><cite>qwat_vX.X.X_structure_only.backup</cite>: Restaure seulement le modèle de données QWAT. En plus vous aurez besoin de restaurer la sauvegarde contenant les listes de valeurs value_list_data_only</p></li>
<li><p><cite>qwat_vX.X.X_value_list_data_only.backup</cite>: Restaure les listes de valeurs du projet QWAT de démonstration</p></li>
<li><p><cite>qwat_vX.X.X_data_only_sample.backup</cite>: Restaure la sauvegarde de données démo (le script init_qwat.sh doit être lancé au préalable pour restaurer les données démo)</p></li>
</ul>
<p>Instructions détaillées</p>
<p>Comment installer le jeu de données démo depuis le projet de gestion de distribution de l’eau QWAT</p>
<p>Créer la base de données QWAT avec les rôles et restaurer la dernière version</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the database and the extensions</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;create database qwat;&#39;</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span> <span class="o">-</span><span class="n">d</span> <span class="n">qwat</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;create extension postgis;&#39;</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span> <span class="o">-</span><span class="n">d</span> <span class="n">qwat</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;create extension hstore;&#39;</span>

<span class="c1"># Create the roles for QWAT</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;CREATE ROLE qwat_viewer NOSUPERUSER INHERIT NOCREATEDB NOCREATEROLE NOREPLICATION;&#39;</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;CREATE ROLE qwat_user NOSUPERUSER INHERIT NOCREATEDB NOCREATEROLE NOREPLICATION;&#39;</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;CREATE ROLE qwat_manager NOSUPERUSER INHERIT NOCREATEDB NOCREATEROLE NOREPLICATION;&#39;</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>
<span class="n">psql</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;CREATE ROLE qwat_sysadmin NOSUPERUSER INHERIT NOCREATEDB NOCREATEROLE NOREPLICATION;&#39;</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>

<span class="c1"># And restore it into your QWAT database</span>
<span class="n">pg_restore</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span> <span class="o">--</span><span class="n">dbname</span> <span class="n">qwat</span> <span class="o">-</span><span class="n">e</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">owner</span> <span class="o">--</span><span class="n">verbose</span> <span class="o">--</span><span class="n">jobs</span><span class="o">=</span><span class="mi">3</span> <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">triggers</span> <span class="o">--</span><span class="n">port</span> <span class="mi">5432</span> <span class="n">qwat_dump</span><span class="o">.</span><span class="n">backup</span>
</pre></div>
</div>
<p>Vous avez maintenant la dernière version du modèle de données (avec le jeu de données démo) + les rôles de base de donnée.</p>
<p><strong>Créer le service QWAT dans le fichier .pg_service.conf</strong></p>
<p>Si vous avez déjà défini le service, vous pouvez passer cette étape, dans le cas contraire, éditez le fichier <code class="docutils literal notranslate"><span class="pre">.pg_service.conf</span></code> et modifiez le de la manière suivante</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">qwat</span><span class="p">]</span>
<span class="c1">#enter your database ip</span>
<span class="n">host</span><span class="o">=</span><span class="mf">127.0.0.1</span>
<span class="c1">#database name</span>
<span class="n">dbname</span><span class="o">=</span><span class="n">qwat</span>
<span class="n">port</span><span class="o">=</span><span class="mi">5432</span>
<span class="n">user</span><span class="o">=</span><span class="n">postgres</span>
<span class="c1">#you can also add your password if you like</span>
<span class="n">password</span><span class="o">=</span><span class="n">YourPassword</span>

<span class="p">[</span><span class="n">qwat_prod</span><span class="p">]</span>
<span class="c1">#enter your database ip</span>
<span class="n">host</span><span class="o">=</span><span class="mf">127.0.0.1</span>
<span class="c1">#database name</span>
<span class="n">dbname</span><span class="o">=</span><span class="n">qwat</span>
<span class="n">port</span><span class="o">=</span><span class="mi">5432</span>
<span class="n">user</span><span class="o">=</span><span class="n">postgres</span>
<span class="c1">#you can also add your password if you like</span>
<span class="n">password</span><span class="o">=</span><span class="n">YourPassword</span>
</pre></div>
</div>
<p><strong>Ouvrir le projet QGIS</strong></p>
<p>Vous pouvez ouvrir le projet <strong>qwat.qgs</strong> du  répertoire qwat-data-sample et vous devriez voir cet écran :</p>
<img alt="../_images/qgis.png" src="../_images/qgis.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vous pouvez également tester le dernier projet <strong>qwat.qgs</strong> du répertoire QWAT. Gardez en tête qu’il existe une chance que ce dernier ne corresponde pas au modèle de données démo. Ceci est du au fait que le modèle de donnée du dernier jeu de données démo soit plus vieux que le dernier modèle de données et que seul projet <strong>.qgs</strong> ait été adapté.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="../developer-guide/upgrade.html" class="btn btn-neutral float-left" title="6.4. Mettre à jour la base de données" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="../faq/index.html" class="btn btn-neutral float-right" title="8. FAQ" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, QWAT team.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>